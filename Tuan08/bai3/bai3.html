<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Bài 3</title>
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<script src="../js/jquery-3.7.1.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
    <style>
		#registrationForm button {
			opacity: 0.5;
			pointer-events: none;
		}
	</style>
</head>
<body>
	<div class="container">
        <form id="registrationForm">
            <div class="row border-bottom m-2 p-2">
                <label for="name" class="col-md-2 mt-2">Họ tên: </label>
                <div class="col-md-6 d-flex">
                    <input type="text" id="name" class="form-control" autofocus>
                    <span id="errorHoten" class="text-danger font-italic ml-3">*</span>
                </div>
            </div>
			<div class="row border-bottom m-2 p-2">
                <label for="stuClass" class="col-md-2 mt-1">Lớp: </label>
                <select id="stuClass" class="col-md-6">
                    <option value="DHKTPM18A">DHKTPM18A</option>
                    <option value="DHKTPM18B">DHKTPM18B</option>
                    <option value="DHKTPM18ATT">DHKTPM18ATT</option>
                    <option value="DHKTPM18BTT">DHKTPM18BTT</option>
                </select>
            </div>
            <div class="row border-bottom m-2 p-2">
                <label for="subject" class="col-md-2">Môn Học: </label>
                <select id="subject" class="col-md-6">
					<option value="Lập trình hướng Dối tượng">Lập trình hướng Dối tượng</option>
                    <option value="Hệ thống & công nghệ Web">Hệ thống & công nghệ Web</option>
                    <option value="Tương tác người máy">Tương tác người máy</option>
                    <option value="Hệ cơ sở dữ liệu">Hệ cơ sở dữ liệu</option>
                </select>
            </div>
			<div class="row border-bottom m-2 p-2">
                <label class="col-md-2 text-left">Loại: </label>
                <div class="col-md-5">
                    <input type="radio" id="subTypeLT" name="subjectType" checked>
                    <label for="subTypeLT">Lý thuyết</label>
                    <input type="radio" id="subTypeTH" name="subjectType" class="ml-3">
                    <label for="subTypeTH">Thực hành</label>
                </div>
            </div>
            <div class="row p-2">
                <button type="button" onclick="dangky()" id="submitButton">Đăng ký</button>
                </div>
        </form>

        <div class="row">
            <table class="table table-hover table-bordered table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th>STT</th>
                        <th>Họ tên</th>
                        <th>LOẠI</th>
                        <th>LỚP HỌC</th>
                        <th>MÔN HỌC</th>
                    </tr>
                </thead>
                <tbody id="tbl"></tbody>
            </table>
        </div>
    </div>

    <script>
        let i = 0;
        
        function dangky(){

            let hoten = $("#name").val();
            let reg_hoten = /^[A-Z][a-z]*(\s[A-Z][a-z]*)+$/;

            if(!reg_hoten.test(hoten)){
                $("#err_name").html("Kí tự đầu là kí tự Hoa");
            }else{
                $("#err_name").html("");
            }


            let type = "LT";
            if(document.getElementById("subTypeTH").checked)
                type = "TH";

            let monHoc = document.getElementById("subject").value;
            let stuClass = document.getElementById("stuClass").value;

            let row = "<tr><td>"+(++i)+"</td><td>" + hoten + "</td><td>" + type + "</td><td>" + stuClass + "</td><td>" + monHoc + "</td></tr>";

            let myTable = document.getElementById("tbl");
            let newRow = myTable.insertRow(myTable.rows.length);
            newRow.innerHTML = row

            return true;
        }

        document.getElementById("name").addEventListener("input", function () {
            let submitButton = document.getElementById("submitButton");
            if (this.validity.valid) {
                submitButton.style.opacity = 1;
                submitButton.style.pointerEvents = "auto";
            } else {
                submitButton.style.opacity = 0.5;
                submitButton.style.pointerEvents = "none";
            }
        });
    </script>
</body>
</html>